<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Legacy Roleplay BD - Blocks</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header -->
  <div id="header-placeholder"></div>

  <!-- Page Content -->
  <main style="padding: 2rem;">
    <h2 style="text-align: center;">Available Blocks</h2>
    <div id="block-list" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; margin-top: 2rem;"></div>
  </main>

  <!-- Footer -->
  <div id="footer-placeholder"></div>

  <!-- Scripts -->
  <script src="js/auth.js"></script>
  <script>
    // Load header and footer
    window.addEventListener('DOMContentLoaded', () => {
      fetch('header.html')
        .then(res => res.text())
        .then(data => {
          document.getElementById('header-placeholder').innerHTML = data;

          // ✅ Header load এর পর ইউজার হেডার আপডেট
          if (typeof renderUserHeader === 'function') {
            renderUserHeader();
          }
        });

      fetch('footer.html')
        .then(res => res.text())
        .then(data => {
          document.getElementById('footer-placeholder').innerHTML = data;
        });

      // Load block data
      fetch('blocks.json')
        .then(res => res.json())
        .then(data => {
          const container = document.getElementById('block-list');
          container.innerHTML = '';

          data.forEach(block => {
            const card = document.createElement('div');
            card.style.width = '300px';
            card.style.border = '1px solid #ccc';
            card.style.borderRadius = '8px';
            card.style.overflow = 'hidden';
            card.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
            card.style.cursor = 'pointer';
            card.addEventListener('click', () => {
              window.location.href = `block.html?id=${block.id}`;
            });

            const img = document.createElement('img');
            img.src = block.image;
            img.alt = block.name;
            img.style.width = '100%';
            img.style.height = '200px';
            img.style.objectFit = 'cover';

            const info = document.createElement('div');
            info.style.padding = '1rem';
            info.innerHTML = `
              <h3 style="margin: 0;">${block.name}</h3>
              <p>Status: <strong style="color: ${block.isAvailable ? 'green' : 'red'}">
                ${block.isAvailable ? 'Available' : `Rented by ${block.rentedBy || 'Unknown'}`}
              </strong></p>
              <p>Houses: ${block.houses}</p>
            `;

            card.appendChild(img);
            card.appendChild(info);
            container.appendChild(card);
          });
        });
    });
  </script>
</body>
</html>
